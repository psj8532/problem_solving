# 백트래킹

> 스도쿠 2580

- 시간초과 발생

- 해결 방법

  - visited 리스트를 없애고 주어진 좌표에서 필요한 행,열의 값이랑 바로 비교하고
  - 조건에 위배되면 바로 return하도록 처리하였음
  - 3x3 영역을 검사할 때 각 범위마다 분기로 나누어 주었는데, 이러한 분기를 없애기 위해 수식을 이용하였음

- 코드

  ```python
  def check_row(y,x): #행 검사
      # visited = [0]*10 #같은 수가 존재하는 확인을 위해
      # for j in range(9):
      #     if sudo[y][j]: #숫자가 들어있으면
      #         if not visited[sudo[y][j]]: # 숫자가 중복되는지 확인
      #             visited[sudo[y][j]] = 1 # 그 숫자를 방문했다는 표시 남김
      #         else:
      #             return False #같은 숫자가 존재하므로 실패
      # return True
      for j in range(9):
          if j != x and sudo[y][j] == sudo[y][x]:
              return False
      return True
  
  
  def check_col(y,x): #열 검사
      # visited = [0]*10
      # for i in range(9):
      #     if sudo[i][x]: #숫자가 들어있으면
      #         if not visited[sudo[i][x]]: # 숫자가 중복되는지 확인
      #             visited[sudo[i][x]] = 1 #그 숫자를 방문했다는 표시 남김
      #         else:
      #             return False
      # return True
      for i in range(9):
          if i != y and sudo[i][x] == sudo[y][x]:
              return False
      return True
  
  
  def check_rect(y,x): # 3x3영역 안 검사하기
      # visited = [0]*10
      # sy,sx = 3*(y//3),3*(x//3)
      # y,x = 3*(y//3)+(y%3),3*(x//3)+(x%3)
      # for i in range(sy,sy+3):
      #     for j in range(sx,sx+3):
      #         if sudo[i][j]: #숫자가 들어있으면
      #             if not visited[sudo[i][j]]: # 숫자가 중복되는지 확인
      #                 visited[sudo[i][j]] = 1#그 숫자를 방문했다는 표시 남김
      #             else:
      #                 return False
      # return True
      sy, sx = 3 * (y // 3), 3 * (x // 3)
      y, x = 3 * (y // 3) + (y % 3), 3 * (x // 3) + (x % 3)
      for i in range(sy, sy + 3):
          for j in range(sx, sx + 3):
              if (i,j)!=(y,x) and sudo[i][j] == sudo[y][x]:
                  return False
      return True
  
  
  def dfs(index):
      global isSuccess
      if index == n:
          isSuccess = True
          for row in sudo:
              print(*row)
          return
  
      y, x = cand[index][0], cand[index][1]
      for num in range(1,10):
          sudo[y][x] = num
          if not check_row(y,x) or not check_col(y,x) or not check_rect(y,x):
              continue
          dfs(index+1)
          if isSuccess:
              return
      else:
          sudo[y][x] = 0
  
  
  sudo = [list(map(int,input().split())) for _ in range(9)]
  isSuccess = False
  cand = []
  for i in range(9):
      for j in range(9):
          if not sudo[i][j]:
              cand.append((i,j))
  n = len(cand)
  dfs(0)
  print('time: {}'.format(time.time()-stime))
  ```

  